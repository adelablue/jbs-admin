webpackJsonp([5],{DgbJ:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("P9l9"),e={data:function(){return{infomations:null,startTime_2:null,shop:{},scripts:{},price:"",now:"",wait:"",host_name:"",host_wechat:"",host_mobile:"",joiners:{},status:!1,dialogVisible:!1,commission:[],total:0,hostBack:0,joinerBack:0,joinerBacks:0,allBacks:[]}},mounted:function(){var s=this.$common.getSessionStorage("objectId");this.getInfo(s)},methods:{getInfo:function(s){var t=this;Object(i.k)(s).then(function(s){if(void 0==s&&t.$message({type:"error",message:"该活动不存在或已取消!"}),200==s.status){if(t.$message({type:"success",message:"获取数据成功!"}),t.hasData=!0,t.infomations=s.data.data,t.shop=t.infomations.shop,t.scripts=t.infomations.script,t.startTime_2=Object(i.f)(new Date(t.infomations.startTime))+" "+Object(i.h)(new Date(t.infomations.startTime))+" "+Object(i.g)(new Date(t.infomations.startTime)),t.price=t.infomations.price,t.now=t.infomations.numberOfParticipators+t.infomations.numberOfOfflinePersons+"人",t.wait="("+t.infomations.minNumberOfAvailableSpots+"~"+t.infomations.maxNumberOfAvailableSpots+")人",t.host_name=t.infomations.hostUser.nickName,t.host_wechat=t.infomations.hostUser.wechatId,t.host_mobile=t.infomations.hostUser.mobile,t.joiners=t.infomations.members,t.infomations.commissions.length>0){t.commission=t.infomations.commissions[0].commissions;var a=t.commission.host,e=t.commission.participators;t.hostBack=a.amount,t.joinerBacks=e.length*e[0].amount,t.joinerBack=e[0].amount,t.total=t.hostBack+t.joinerBacks;for(var o=0;o<e.length;o++)for(var n=0;n<t.joiners.length;n++)if(t.joiners[n].user.id==e[o].user){var c={nick:t.joiners[n].user.nickName,money:e[0].amount};t.allBacks.push(c),console.log(t.allBacks)}}else t.$message({type:"success",message:"暂未获取到返现详情!"}),t.hasData=!1;"completed"==t.infomations.status?t.status=!0:t.status=!1}else 404==s.status&&(t.hasData=!0,t.$message({type:"success",message:"该活动不存在或已取消!"}))})},copyHost:function(s){void 0!=s.text&&this.$message({type:"success",message:"发团人微信号 "+s.text+" 复制成功!"})},copyHostError:function(s){this.$message({type:"success",message:"发团人微信复制失败!"})},copyJoiner:function(s){this.$message({type:"success",message:"参团人微信号 "+s.text+" 复制成功!"})},copyJoinerError:function(s){this.$message({type:"success",message:"参团人微信复制失败!"})},showCallBack:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1}}},o={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"container"},[a("div",[a("div",{staticClass:"item"},[a("div",{staticClass:"script_name"},[s._v("剧本:   "),a("span",{staticClass:"name_"},[s._v(s._s(s.scripts.name))])])]),s._v(" "),a("div",{staticClass:"shop item"},[a("div",{staticClass:"shop_name"},[s._v("店名:   "),a("span",{staticClass:"name_"},[s._v(s._s(s.shop.name))])])]),s._v(" "),a("div",{staticClass:"startTime item"},[a("div",{staticClass:"start_time"},[s._v("时间:   "),a("span",{staticClass:"time_"},[s._v(s._s(s.startTime_2))])])]),s._v(" "),a("div",{staticClass:"price item"},[a("div",{staticClass:"script_price"},[s._v("价格:   "),a("span",{staticClass:"price_"},[s._v(s._s(s.price)+" 元/人")])])]),s._v(" "),a("div",{staticClass:"process item"},[a("div",{staticClass:"script_process"},[s._v("进度:   "),a("span",{staticClass:"process_"},[a("i",[s._v(s._s(s.now))]),s._v(" == "),a("i",[s._v(s._s(s.wait))])])])]),s._v(" "),a("div",{staticClass:"host item"},[a("div",{staticClass:"host_"},[s._v("发团人:   "),a("span",{staticClass:"host_name"},[s._v("昵称: "+s._s(s.host_name))]),s._v(" "),a("span",{staticClass:"host_wechat"},[s._v("微信: "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:s.host_wechat,expression:"host_wechat",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:s.copyHost,expression:"copyHost",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:s.copyHostError,expression:"copyHostError",arg:"error"}],staticClass:"i_host_wechat"},[s._v(s._s(s.host_wechat))])])])]),s._v(" "),a("div",{staticClass:"host_mobile item"},[a("div",{staticClass:"host_m"},[s._v("发团人手机号:   "),a("span",{staticClass:"mobile"},[s._v(s._s(s.host_mobile))])])]),s._v(" "),a("div",{staticClass:"joiner item"},[a("div",{staticClass:"joiner_m"},[s._v("参团人:")]),s._v(" "),a("div",{staticClass:"joiners"},s._l(s.joiners,function(t){return a("li",{key:t.index},[a("span",{staticClass:"nickName"},[s._v("昵称: "),a("i",{staticClass:"niname"},[s._v(s._s(t.user.nickName))]),s._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.user.wechatId,expression:"item.user.wechatId",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:s.copyJoiner,expression:"copyJoiner",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:s.copyJoinerError,expression:"copyJoinerError",arg:"error"}],staticClass:"weixin"},[s._v(s._s(t.user.wechatId))])])])}),0),s._v(" "),a("div",{staticStyle:{clear:"both"}})]),s._v(" "),a("div",{staticClass:"btns"},[s.status?s._e():a("span",{staticClass:"nocallback"},[s._v("返现")]),s._v(" "),s.status?a("span",{staticClass:"callback",on:{click:s.showCallBack}},[s._v("返现")]):s._e()]),s._v(" "),s.dialogVisible?a("div",{staticClass:"dialog_wraps"},[a("div",{staticClass:"dialog_contents"},[a("div",{staticClass:"dialogs-header"},[a("span",{staticClass:"title"},[s._v("返现详情")]),s._v(" "),a("span",{staticClass:"el-icon-close close",on:{click:function(t){s.dialogVisible=!1}}})]),s._v(" "),a("div",{staticClass:"contents"},[a("li",[s._v("总共返现: "+s._s(s.total.toFixed(2))+"元")]),s._v(" "),a("li",[s._v("发团人: "+s._s(s.host_name)+" "),a("i",[s._v(s._s(s.hostBack.toFixed(2))+"元")])]),s._v(" "),a("li",[a("div",{staticClass:"joiner_m"},[s._v("参团人:")]),s._v(" "),a("div",{staticClass:"joiners"},s._l(s.allBacks,function(t){return a("li",{key:t.index},[a("span",{staticClass:"nickName"},[s._v("昵称: "),a("i",{staticClass:"niname"},[s._v(s._s(t.nick))]),s._v(" "),a("i",{staticClass:"weixin"},[s._v(s._s(t.money.toFixed(2))+"元")])])])}),0),s._v(" "),a("div",{staticStyle:{clear:"both"}})])]),s._v(" "),a("div",{staticClass:"dialogs-footer"},[a("el-button",{on:{click:function(t){s.dialogVisible=!1}}},[s._v("取 消")]),s._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){s.dialogVisible=!1}}},[s._v("确 定")])],1)])]):s._e()])])},staticRenderFns:[]};var n=a("VU/8")(e,o,!1,function(s){a("xQBR")},"data-v-53ca1ec9",null);t.default=n.exports},xQBR:function(s,t){}});