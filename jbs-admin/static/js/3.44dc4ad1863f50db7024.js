webpackJsonp([3],{hq0r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("P9l9"),r={data:function(){return{ordersList:[],links:null,pagination:null,pageShow:!1,total:0,currentPage:1,postData:{limit:10,offset:0},searId:""}},created:function(){this.getAllOrders(this.postData)},methods:{getAllOrders:function(e){var t=this;Object(s.i)(e).then(function(e){if(200==e.status){t.$message({type:"success",message:"获取数据成功!"}),t.pageShow=!0;for(var a=e.data.data,r=0;r<a.length;r++)a[r].money=a[r].amount/100,a[r].create_time=Object(s.d)(new Date(a[r].createdAt)),a[r].orderStatus=a[r].orderStatus,"paid"==a[r].orderStatus?a[r].orderStatus2="已支付":"unpaid"==a[r].orderStatus?a[r].orderStatus2="未支付":"refund"==a[r].orderStatus?a[r].orderStatus2="申请退款":"created"==a[r].orderStatus?a[r].orderStatus2="创建订单":"approved"==a[r].orderStatus?a[r].orderStatus2="待退款":"failed"==a[r].orderStatus&&(a[r].orderStatus2="退款失败"),"event_created"==a[r].type?a[r].type2="创建活动":"event_join"==a[r].type?a[r].type2="参与活动":"event_completed"==a[r].type&&(a[r].type2="活动完成"),a[r].refunds.length>0?"refund"==a[r].refunds[0].status?(a[r].refundStatus="退款成功",a[r].refundStatus2="success",a[r].refundStatus4="success"):"created"==a[r].refunds[0].status?(a[r].refundStatus="申请退款",a[r].refundStatus5="success"):"approved"==a[r].refunds[0].status?a[r].refundStatus="退款审核":"failed"==a[r].refunds[0].status&&(a[r].refundStatus="状态错误"):a[r].refundStatus="未申请";t.links=e.data.links,t.pagination=e.data.pagination,t.total=t.pagination.total,t.ordersList=a}})},handleSizeChange:function(e){this.postData.limit=e,this.getAllOrders(this.postData)},handleCurrentChange:function(e){this.postData.offset=(e-1)*this.postData.limit,this.currentPage=e,this.getAllOrders(this.postData)},searchOrder:function(){this.postData.tradeNo=this.searId,this.getAllOrders(this.postData)},update:function(e){var t=this;if("created"!=e.orderStatus){var a={orderId:e.id,refundId:e.refunds[0].id};Object(s.m)(a,{status:"approved"}).then(function(e){200==e.status?(t.$message({type:"success",message:"订单状态修改成功!"}),t.getAllOrders(t.postData)):t.$message({type:"error",message:"订单状态修改失败!"})})}else this.$message({type:"error",message:"~@o@~ 未解散的团不能更改状态! ~@o@~ "})},update2:function(){console.log(222)},torefund:function(){var e=this;Object(s.k)().then(function(t){200==t.status&&(e.$message({type:"success",message:"退款操作已完成!"}),e.getAllOrders(e.postData))})},torefund2:function(){this.$message({type:"error",message:"该订单暂不支持退款!"})},copyOrderS:function(e){void 0!=e.text&&this.$message({type:"success",message:"订单号 "+e.text+" 复制成功!"})},copyOrderE:function(e){this.$message({type:"success",message:"订单号复制失败!"})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"输入订单号查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchOrder(t)}},model:{value:e.searId,callback:function(t){e.searId=t},expression:"searId"}})],1),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ordersList,border:"","header-cell-style":{"background-color":"#fafafa",color:"#000"}}},[a("el-table-column",{attrs:{prop:"outTradeNo",label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outTradeNo))]),e._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.outTradeNo,expression:"scope.row.outTradeNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.copyOrderS,expression:"copyOrderS",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.copyOrderE,expression:"copyOrderE",arg:"error"}],staticClass:"i_host_wechat"},[e._v("复制")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus2",label:"订单状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"refundStatus",label:"退款状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type2",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["success"!=t.row.refundStatus4?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.update(t.row)}}},[e._v("更新状态")]):e._e(),e._v(" "),"success"==t.row.refundStatus4?a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"}},[e._v("已退款")]):e._e()]}}])})],1)],1),e._v(" "),e.pageShow?a("div",{staticClass:"Pagination Pagination2"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"pager-count":5,"page-sizes":[10,20,25,50,100],"page-size":10,total:e.total,layout:"total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),a("div",{staticStyle:{clear:"both"}})])},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(e){a("lH3G")},"data-v-a4d5e6d4",null);t.default=o.exports},lH3G:function(e,t){}});